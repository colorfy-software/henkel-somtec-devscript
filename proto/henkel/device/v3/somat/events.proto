syntax = "proto3";

package henkel.device.v3.somat;
option go_package = "henkel/proto/gen/henkel/device/v3/somat;iotsomatpb";

import "google/protobuf/timestamp.proto";

message WashCycleStartedEvent {
  // Unique Event UUID. Should be randomly generated in firmware when event is created
  string event_id = 7;
  // Device UUID
  string device_id = 2;
  // Time this event occurred (when wash cycle started)
  google.protobuf.Timestamp time = 3;

  // Wash Cycle UUID should be randomly generated by firmware whenever a new wash cycle starts
  string wash_cycle_id = 1;
  // Program setting this wash cycle was started with
  string program = 4;
  // Detergent fill level when wash cycle started
  int32 detergent_fill_level = 5;
  // Battery level when wash cycle started
  string battery_level = 6;
  // Refill UUID that is used during this wash cycle
  string refill_id = 8;
}

message WashCycleCompletedEvent {
  // Unique Event UUID. Should be randomly generated in firmware when event is created
  string event_id = 20;
  // Device UUID
  string device_id = 2;
  // Time this event occurred (when wash cycle completed)
  google.protobuf.Timestamp time = 3;

  // Wash Cycle UUID should be randomly generated by firmware whenever a new wash cycle starts
  string wash_cycle_id = 1;
  // Wash cycle duration in milliseconds
  int32 duration = 4;
  // Program setting this wash cycle was run with
  string program = 5;
  int32 initial_detergent_fill_level = 6;
  int32 final_detergent_fill_level = 7;
  int32 initial_enzyme_fill_level = 14;
  int32 final_enzyme_fill_level = 15;
  int32 initial_alkali_fill_level = 16;
  int32 final_alkali_fill_level = 17;
  int32 initial_rinser_fill_level = 18;
  int32 final_rinser_fill_level = 19;
  string initial_battery_level = 11;
  string final_battery_level = 12;
  // Maximum temperature in degree celsius reached during wash cycle
  float max_temp = 21;

  // Refill UUID that was used during this wash cycle
  string refill_id = 13;

  // Deprecated. Serves no purpose
  bool time_estimated = 10;
}

message RefillChangedEvent {
  // Unique Event UUID. Should be randomly generated in firmware when event is created
  string event_id = 1;
  // Device UUID
  string device_id = 2;
  // Time this event occurred (refill change detected)
  google.protobuf.Timestamp time = 3;

  // New Refill UUID. Should be randomly generated when ever a new refill is inserted
  string refill_id = 4;
}

// Deprecated, use WashCycleCompletedEvent instead
message WashCycleEvent {
  // Wash Cycle ID (UUID)
  string id = 1;
  string device_id = 2;
  google.protobuf.Timestamp time = 3;

  // Wash cycle duration in milliseconds
  int32 duration = 4;
  string program = 5;
  int32 initial_detergent_fill_level = 6;
  int32 final_detergent_fill_level = 7;
  string initial_battery_level = 11;
  string final_battery_level = 12;
  // Set to true if timestamp has been estimated by the firmware
  bool time_estimated = 10;
}